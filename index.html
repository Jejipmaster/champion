<!--
    File: index.html
    Project: RandomChampion
    Created: 2020-10-29 16:38:33
    Author: Hyunbin Kim (khb7840@gmail.com)
    Description:
        This code is written as part of project "RandomChampion".
    ---
    Last Modified: 2020-10-29 17:44:57
    Modified By: Hyunbin Kim (khb7840@gmail.com)
    ---
    Copyright © 2020 Hyunbin Kim, All rights reserved
-->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Yeon+Sung&display=swap" rel="stylesheet">
    <title>랜덤챔피언 골라오기</title>
</head>
<body>
    <style>
        #bigcontainer {
            text-align: center;
        }
        body {
            background-color: black;
        }
        h1 {
            font-family:'Do Hyeon'; sans-serif;
            font-size: 80px;
            color: white;
        }
        h2 {
            font-family:'Do Hyeon'; sans-serif;
            font-size: 40px;
            color: white;
        }
        #position {
            color: gold;
        }
        p {
            font-family: 'Yeon Sung', cursive;
            font-size: 24px;
            color: gainsboro;
        }
    </style>
    <div id="bigcontainer">
        <h1 id="champion-name">오늘의 챔피언<br></h1>
        <h2 id="description"></h2>
        <div id="imgcontainer"></div>
        <h2 id="position"></h2>
        <p id="longstory"></p>
    </div>

    <script>
        // 챔피언을 골라오자
        let champs;
        let positions = ["탑", "정글", "미드", "원딜", "서폿"];
        let randomChamp;
        let randomPosition;
        let version = "10.22.1"
        let lang = "ko_KR"

        function SelectRandom(array) {
            return array[Math.floor(Math.random() * array.length)];
        }
        function PrintChampName(name, id="champion-name") {
            let champElement = document.getElementById(id);
            champElement.innerHTML += `${name}!!`
        }
        function PrintChampionDescription(description, id="description") {
            let descriptionElement = document.getElementById(id);
            descriptionElement.innerHTML += `- ${description} -`
        }
        function PosSuffix(pos) {
            if (pos === "탑" || pos === "서폿") {
                return "으로";
            }
            return "로";
        }
        function PrintPosition(pos, suffix, id="position") {
            let positionElement = document.getElementById(id);
            positionElement.innerHTML += `이 챔피언을 들고<br>${pos}${suffix} 가보자! 굿럭!!`
        }
        function ChampImageLink(name) {
            return `http://ddragon.leagueoflegends.com/cdn/${version}/img/champion/${name}.png`
        }

        function AddImage(name, zoom="50%", targetID = "imgcontainer") {
            let imageLink = ChampImageLink(name);
            let img = document.createElement("img");
            img.setAttribute("src", imageLink);
            img.setAttribute("width", zoom);
            let target = document.getElementById(targetID);
            target.appendChild(img);
        }

        function PrintStory(story, id="longstory") {
            let storyElement = document.getElementById(id);
            storyElement.innerHTML += `${story}`
        }

        let dataJSONlink = `http://ddragon.leagueoflegends.com/cdn/${version}/data/${lang}/champion.json`

        fetch(dataJSONlink)
        .then(res => res.json())
        .then(jsonData => jsonData.data)
        .then(data=> {
            champs = Object.keys(data);
            randomChamp = SelectRandom(champs);
            randomPosition = SelectRandom(positions);
            let suffix = PosSuffix(randomPosition);
            PrintChampName(data[randomChamp]["name"])
            PrintChampionDescription(data[randomChamp]["title"])
            AddImage(randomChamp);
            PrintPosition(randomPosition, suffix);
            PrintStory(data[randomChamp]["blurb"]);
            console.log(randomChamp);
            console.log(randomPosition);
        });
    </script>

</body>
</html>